<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <input type="text" name="user_name">
    <input type="text" name="age" class="age">

    <button class="set">存储数据</button>
    <button class="get">获取数据</button>
    <button class="remove">删除数据</button>
    <button class="clear">清空所有数据</button>
    <script>
        
        // localStorage
        // 1、生命周期永久生效，除非手动删除 否则关闭页面也会存在
        // 2、可以多窗口（页面）共享（同一浏览器可以共享）

        // 获取元素
        var input = document.querySelector('input')
        var input2 = document.querySelector('.age')

        var set = document.querySelector('.set')
        var get = document.querySelector('.get')
        var remove = document.querySelector('.remove')
        var clear = document.querySelector('.clear')

        // 设置 存数据
        set.addEventListener('click', function(){
            localStorage.setItem(input.name, input.value)
            localStorage.setItem(input2.name, input2.value)
        })

        get.addEventListener('click', function(){
            var res = localStorage.getItem('user_name')
            console.log(res)
        })
        // 清除 某个 数据
        remove.addEventListener('click',function(){
            localStorage.removeItem('user_name')
        })

        // clear 删除所有的
        clear.addEventListener('click', function(){
            localStorage.clear()
        })

        
        // 3.扩展: 实际开发 咱们存储的 一般是对象的数据
        var data = {
            name:'小王',
            age:18
        }
        // 如果 我们 要把 这个对象 当做 value 存到 localStorage 或者 sessionStorage
        // 把对象转为JSON字符串
        // https://www.runoob.com/json/json-syntax.html
        // console.log(JSON.stringify(data))
        // JSON字符串  如果里面key value 是字符串, 一定 一定 是 双引号引起来的
        // JSON.stringify()
        localStorage.setItem('userInfo',JSON.stringify(data))
        var userInfo = localStorage.getItem('userInfo')
        // console.log(userInfo)
        // console.log(typeof userInfo)

        // JSON.parse() 
        // 把一个有效的 JSON 字符串. 转为 对象
        // {"name":"小王","age":18}
        // var str = `{"name":'小王',"age":18}`
        // var str = `{"name":"小王","age":18}`
        // var res = JSON.parse(str)
        // console.log(res)

        // var temp = localStorage.getItem('userInfo')
        // console.log(temp)
        // console.log(JSON.parse(temp))


        var res = JSON.parse(localStorage.getItem('userInfo'))
        console.log(res)
        // console.log(res.age)

    </script>
</body>

</html>